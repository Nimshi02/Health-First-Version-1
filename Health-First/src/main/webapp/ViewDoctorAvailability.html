<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Patient page</title>
<script src="jquery.min.js"></script>
<link href="adminstylecss.css" rel="stylesheet">
<link rel="stylesheet" href="font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<style>
.input-field {
  width: 250px;
  padding: 10px;
  outline: none;
}

.input-field:focus {
  border: 2px solid dodgerblue;
}
a {
  color: white;
  text-decoration: none; /* no underline */
}
table, th, td {

  border: 1px solid black;
  
}
table{
width:100%
}
</style>

<script>
if(sessionStorage.getItem('username')==null){
	location.href="login.html"
};
var url_string = window.location.href; 
var url = new URL(url_string);
var token = sessionStorage.getItem('accessToken');
var role=sessionStorage.getItem('role');
	$(document).ready(function(){
		  $("button").click(function(){
			 

			
			  var dname=document.getElementById("dname").value;
			  var Speciality=document.getElementById("Speciality").value;
		    $.ajax({ 
		    	type: "GET",
			        url: 'https://localhost:8243/dataservice/1.0.0/GetAvailability?Dname='+dname+'&Speciality='+Speciality,
			        headers:{         
			            'Authorization' : 'Bearer '+token,
			            'accept' :'*/*',
			            },
		    	
		    	success: function(result, status, xhr){  
                    DoctorDetails(result);
                    
		    	
		    		
		    },
			        error: function(error){
			  	      $("#div1").html("An error occured while viewing the patinent details. Please try again.");
			        }
			});
		  });
		});
	
	function DoctorDetails(xml) {
        var i;
        var table =
            `<table><tbody><tr><th>DoctorName</th>
                <th>Availability</th>
                <th>Speciality</th>
            </tr>`;
        var x = xml.getElementsByTagName("Entry");

        // Start to fetch the data by using TagName 
        for (i = 0; i < x.length; i++) {
            table += `<tr><td>` +
                x[i].getElementsByTagName("Dname")[0]
                .childNodes[0].nodeValue + `</td><td>` +
                x[i].getElementsByTagName("availability")[0]
                .childNodes[0].nodeValue + `</td><td>` +
                x[i].getElementsByTagName("speciality")[0]
                .childNodes[0].nodeValue + `</td></tr>`;
                
        }
        document.getElementById("div1").innerHTML = table;
	}

</script>
</head>

<body style="text-align: center" >
	<header style="text-align: right; color: #FFFFFF;"><i class="fa fa-user-circle-o" style="font-size:24px;color: white;"></i>&nbsp;Welcome, User&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</header>
<div id="div1"align="center">

    <input class="input-field" type="text" placeholder="Doctor Name" name="dname"id="dname">
<br><br>

    <input class="input-field" type="text" placeholder="Speciality" name="Speciality" id="Speciality">
 <br>
 <br>
  <button type="submit" class="btn" style="background-color: #2d2c66;"><strong>View Availability<strong></button>
</div>

</body>
</html> 