<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Pharmacist Availability page</title>
<script src="jquery.min.js"></script>
<link href="adminstylecss.css" rel="stylesheet">
<link rel="stylesheet" href="font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<style>
.input-field {
  width: 250px;
  padding: 10px;
  outline: none;
}

.input-field:focus {
  border: 2px solid dodgerblue;
}
a {
  color: white;
  text-decoration: none; /* no underline */
}
table, th, td {

  border: 1px solid black;
  
}
table{
width:100%
}
</style>

<script>
if(sessionStorage.getItem('username')==null){
	location.href="login.html"
};
var url_string = window.location.href; 
var url = new URL(url_string);
var token = sessionStorage.getItem('accessToken');
	$(document).ready(function(){
		 
		    $.ajax({ 
		    	type: "GET",
			        url: 'https://localhost:8243/dataservice/1.0.0/ListPrescriptionForPharmacist',
			        headers:{         
			            'Authorization' : 'Bearer '+token,
			            'accept' :'*/*',
			            },
		    	
		    	success: function(result, status, xhr){  
		    		PrescriptionDetails(result);
                    
		    	
		    		
		    },
			        error: function(error){
			  	      $("#div1").html("An error occured while viewing the patinent details. Please try again.");
			        }
			});
		  });
	
	function PrescriptionDetails(xml) {
        var i;
        var table =
            `<table><tbody><tr><th>Prescription Unique Number</th>
                <th>Doctor ID</th>
                <th>Location</th>
                <th>Note</th>
                <th>Date</th>
                <th>Description</th>
            </tr>`;
        var x = xml.getElementsByTagName("Entry");

        // Start to fetch the data by using TagName 
        for (i = 0; i < x.length; i++) {
            table += `<tr><td>` +
                x[i].getElementsByTagName("pNo")[0]
                .childNodes[0].nodeValue + `</td><td>` +
                x[i].getElementsByTagName("did")[0]
                .childNodes[0].nodeValue + `</td><td>` +
                x[i].getElementsByTagName("pid")[0]
                .childNodes[0].nodeValue + `</td><td>` +
                x[i].getElementsByTagName("note")[0]
                .childNodes[0].nodeValue + `</td><td>` +
                x[i].getElementsByTagName("date")[0]
                .childNodes[0].nodeValue + `</td><td>` +
                x[i].getElementsByTagName("descripion")[0]
                .childNodes[0].nodeValue + `</td></tr>`;
                
        }
        document.getElementById("div1").innerHTML = table;
	}

</script>
</head>

<body style="text-align: center" >
	<header style="text-align: right; color: #FFFFFF;"><i class="fa fa-user-circle-o" style="font-size:24px;color: white;"></i>&nbsp;Welcome, Pharmacist&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</header>
<div id="div1"align="center">

</div>

</body>
</html> 